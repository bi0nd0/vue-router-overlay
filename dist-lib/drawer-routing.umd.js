(function(i,e){typeof exports=="object"&&typeof module<"u"?module.exports=e(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],e):(i=typeof globalThis<"u"?globalThis:i||self,i.DrawerRoutingPlugin=e(i.Vue))})(this,function(i){"use strict";const e=i.reactive({isOpen:!1,baseRoute:null,overlayRoute:null});function d(){const a=new Set;let l=null;return{install(r,{router:s}){const u=(n,o="")=>{n.forEach(t=>{var c;const f=o+(t.path.startsWith("/")?t.path:`/${t.path}`);(c=t.meta)!=null&&c.overlay&&a.add(t.name||f),t.children&&u(t.children,f)})};u(s.getRoutes());const v=n=>n.name===void 0&&n.matched.length===0;s.beforeEach((n,o,t)=>{if(h(n,a)){if(v(o)){l=n.fullPath,t({path:"/",replace:!0});return}e.isOpen||(e.baseRoute=i.markRaw(o),e.isOpen=!0),e.overlayRoute=i.markRaw(n),t()}else e.isOpen?e.isOpen=!1:(e.overlayRoute=null,e.baseRoute=null),t()}),s.afterEach(()=>{l&&(s.push(l),l=null)}),r.provide("overlayRouter",{state:e,isOverlayRoute:n=>a.has(n),isOverlayActive:()=>e.isOpen})}}}function h(a,l){var r;return!!((r=a.meta)!=null&&r.overlay||a.name&&l.has(a.name)||a.matched&&a.matched.some(s=>{var u;return(u=s.meta)==null?void 0:u.overlay}))}return d});
